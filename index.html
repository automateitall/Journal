
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png">
    <title>Personal Journal</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/compromise@latest/builds/compromise.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<!-- Login Screen -->
<div id="loginOverlay" class="login-overlay">
    <div class="login-card">
        <h1>üåø Personal Journal</h1>
        <p>Enter your password to access your journal</p>
        <form class="login-form" onsubmit="handleLogin(event)">
            <input type="password" id="passwordInput" class="login-input" placeholder="Password" required>
            <button type="submit" class="login-btn">Access Journal</button>
            <div id="loginError" class="login-error"></div>
        </form>
        <div id="firstTimeSetup" class="first-time-setup" style="display: none;">
            <h3>First Time Setup</h3>
            <p>Set a secure password for your journal</p>
            <form class="setup-Password" onsubmit="setupPassword(event)">
                <input type="password" id="newPassword" class="login-input" placeholder="Choose password" required minlength="4">
                <input type="password" id="confirmPassword" class="login-input" placeholder="Confirm password" required minlength="4">
                <button type="submit" class="login-btn">Set Password</button>
            </form>
        </div>
    </div>
</div>

<!-- Main App -->
<div id="mainApp" class="app-container">
    <!--OG Sidebar -->
    <div class="sidebar-wrapper">
        <div class="sidebar">
            <div class="user-info">
                <div style="font-size: 0.8rem; opacity: 0.8;" id="currentDate"></div>
                <div id="connectionStatus"></div>
            </div>
            <div class="streak-info">
                <div class="streak-number" id="streakNumber">0</div>
                <div class="streak-label">Day Streak</div>
            </div>

            <nav class="nav-menu">
                <div class="nav-item" onclick="showSection('new-entry')">
                    <span class="nav-icon">‚úèÔ∏è</span> New Entry
                    
                </div>
                <div class="nav-item active" onclick="showSection('entries')">
                    <span class="nav-icon">üìö</span> All Entries
                    
                </div>
                <div class="nav-item" onclick="showSection('todos')">
                    <span class="nav-icon">‚úÖ</span> To-Dos
                    
                </div>
                <div class="nav-item" onclick="showSection('ai-reviews')">
                    <span class="nav-icon">ü§ñ</span> AI Reviews
                    
                </div>
                <div class="nav-item" onclick="showSection('analytics')">
                    <span class="nav-icon">üìä</span> Analytics
                    
                </div>
                <div class="nav-item" onclick="showSection('calendar')">
                    <span class="nav-icon">üìÖ</span> Calendar
                    
                </div>
            </nav>

            <div class="logout-section">
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
        
        <!-- categories -->
        <!-- Journal Entries -->
        
    </div>
    <!-- Main Content -->
    <div class="main-content">
        <div class="toolbar">
            <div class="toolbar-left">
                <h2 id="sectionTitle">New Entry</h2>
            </div>
            <div class="toolbar-right">
                <div class="weather-widget" id="weatherWidget">
                    <span>üå§Ô∏è</span>
                    <span id="weatherInfo">Loading weather...</span>
                </div>
                <button class="btn-secondary" onclick="exportData()" title="Export Backup">üíæ Backup</button>
            </div>
        </div>

        <div class="content-area">
            <!-- New Entry Section -->
            <div id="new-entry" class="content-section active">
                <div class="content-card">
                    <form onsubmit="saveEntry(event)">
                        <div class="form-group">
                            <input type="text" id="entryTitle" class="form-input" placeholder="What's on your mind?" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <select id="entryMood" class="form-select" required>
                                    <option value="">Select mood</option>
                                    <option value="üòä Happy">üòä Happy</option>
                                    <option value="üòå Peaceful">üòå Peaceful</option>
                                    <option value="ü§î Thoughtful">ü§î Thoughtful</option>
                                    <option value="üòî Melancholic">üòî Melancholic</option>
                                    <option value="üò∞ Anxious">üò∞ Anxious</option>
                                    <option value="üò¥ Tired">üò¥ Tired</option>
                                    <option value="üéâ Excited">üéâ Excited</option>
                                    <option value="üò§ Frustrated">üò§ Frustrated</option>
                                    <option value="‚ù§Ô∏è Grateful">‚ù§Ô∏è Grateful</option>
                                    <option value="üåü Inspired">üåü Inspired</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <input type="text" id="entryLocation" class="form-input" placeholder="Where are you?">
                                    <button type="button" class="btn-secondary" onclick="getCurrentLocation()">üìç</button>
                                </div>
                            </div>
                            

                            <div class="form-group">
                                <div class="tags-input" id="tagsInput">
                                    <input type="text" class="tag-input" placeholder="Add tags..." onkeydown="handleTagInput(event)">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Voice Note</label>
                                <div class="voice-controls">
                                    <button type="button" class="voice-btn" id="voiceBtn" onclick="toggleVoiceRecording()">üé§</button>
                                    <span class="voice-status" id="voiceStatus">Click to record</span>
                                    <audio id="voicePlayback" controls style="display: none;"></audio>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div id="entryContentEditor" style="height: 300px; background: white;"></div>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="featuredEntry"> Mark as featured
                            </label>
                        </div>

                        <button type="submit" class="btn-primary" id="saveButton">
                            <span id="saveButtonText">Save Entry</span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- All Entries Section -->
            <div id="entries" class="content-section">
                <!-- All Entries Section -->
                <!-- Search Filter -->
                <div class="content-card">
                    <div class="entries-header">
                        <div class="search-container">
                            <div class="search-box">
                                <span class="search-icon">üîç</span>
                                <input type="text" id="entriesSearch" class="search-input" 
                                placeholder="Search entries" 
                                oninput="filterEntries()">
                                <button class="search-clear" onclick="clearSearch()" title="Clear search">√ó</button>
                            </div>
                            <div class="filter-controls">
                                <select id="moodFilter" class="filter-select" onchange="filterEntries()">
                                    <option value="">All Moods</option>
                                    <option value="üòä Happy">üòä Happy</option>
                                    <option value="üòå Peaceful">üòå Peaceful</option>
                                    <option value="ü§î Thoughtful">ü§î Thoughtful</option>
                                    <option value="üòî Melancholic">üòî Melancholic</option>
                                    <option value="üò∞ Anxious">üò∞ Anxious</option>
                                    <option value="üò¥ Tired">üò¥ Tired</option>
                                    <option value="üéâ Excited">üéâ Excited</option>
                                    <option value="üò§ Frustrated">üò§ Frustrated</option>
                                    <option value="‚ù§Ô∏è Grateful">‚ù§Ô∏è Grateful</option>
                                    <option value="üåü Inspired">üåü Inspired</option>
                                </select>

                                <select id="dateFilter" class="filter-select" onchange="filterEntries()">
                                    <option value="">All Dates</option>
                                    <option value="today">Today</option>
                                    <option value="week">This Week</option>
                                    <option value="month">This Month</option>
                                    <option value="year">This Year</option>
                                </select>

                                <select id="sortFilter" class="filter-select" onchange="filterEntries()">
                                    <option value="newest">Newest First</option>
                                    <option value="oldest">Oldest First</option>
                                    <option value="title">Title A-Z</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="search-results-info" id="searchResultsInfo">
                        <!-- Search results info will appear here -->
                    </div>

                    <div class="entry-list" id="entryList">
                        <!-- Entries will be loaded here -->
                    </div>
                </div>
            </div>
            <!-- To-Do List Section -->
            <div class="todo-container">
                <div id="todos" class="content-section">
                    <div class="content-card">
                        <h3>My To-Do List</h3>
                        <div style="margin: 16px 0;">
                            <input type="text" id="newTodoInput" class="form-input" placeholder="Add a new task..." onkeydown="handleTodoInput(event)">
                        </div>
                        <div id="todoList">
                            <!-- Todos will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>


            <!-- AI Reviews Section -->
            <div id="ai-reviews" class="content-section">
                <div class="content-card ai-card">
                    <h3>ü§ñ AI-Powered Reviews</h3>
                    <div style="margin-bottom: 16px;">
                        <select id="reviewPeriod" class="form-select" style="width: auto;" onchange="generateAIReview()">
                            <option value="week">Weekly Review</option>
                            <option value="month">Monthly Review</option>
                            <option value="year">Yearly Review</option>
                        </select>
                    </div>
                    <div id="aiReviewContent">
                        <p>Select a period and click generate to see your AI-powered insights.</p>
                        <button class="btn-primary" onclick="generateAIReview()" style="margin-top: 12px;">Generate Review</button>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analytics" class="content-section">
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats will be loaded here -->
                </div>
                <div class="content-card">  <h3>Mood Analytics</h3>
                    <p>Track your emotional journey over time</p>

                    <!-- Date Range Filter -->
                    <div class="filter-controls" style="margin-bottom: 20px; padding: 15px; background: #f7fafc; border-radius: 8px;">
                        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">Start Date</label>
                                <input type="date" id="startDate" class="form-input" style="min-width: 150px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">End Date</label>
                                <input type="date" id="endDate" class="form-input" style="min-width: 150px;">
                            </div>
                            <div style="display: flex; gap: 10px; align-self: flex-end;">
                                <button class="btn-primary" onclick="updateMoodChart()">Apply Filter</button>
                                <button class="btn-secondary" onclick="resetDateFilter()">Show All</button>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics Cards -->
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div class="stat-card">
                            <div class="stat-number" id="avgMood">-</div>
                            <div class="stat-label">Average Mood</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="moodRange">-</div>
                            <div class="stat-label">Mood Range</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="positiveDays">-</div>
                            <div class="stat-label">Positive Days</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="trendDirection">-</div>
                            <div class="stat-label">Trend</div>
                        </div>
                    </div>

                    <!-- Mood Chart Container -->
                    <div class="chart-container" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">Mood Timeline</h3>
                        <div style="position: relative; height: 400px;">
                            <canvas id="moodChart"></canvas>
                        </div>
                    </div>

                    <!-- Mood Legend -->
                    <div class="mood-legend" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; padding: 15px; background: #f7fafc; border-radius: 8px;">
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <div style="width: 12px; height: 12px; background: #ef4444; border-radius: 50%;"></div>
                            <span>Low Mood (1-4)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <div style="width: 12px; height: 12px; background: #f59e0b; border-radius: 50%;"></div>
                            <span>Medium Mood (5-6)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <div style="width: 12px; height: 12px; background: #10b981; border-radius: 50%;"></div>
                            <span>High Mood (7-10)</span>
                        </div>
                    </div>
                </div>
                <!-- In your Analytics section -->
<!-- Replace your current analytics mood dependency section with this -->
<div class="content-card">
    <h3>Mood Dependency</h3>
    <p style="color:#6b7280;margin-bottom:20px;">Analyze how your mood changes by location, time, and day of the week.</p>
    
    <div style="display:grid;grid-template-columns:1fr;gap:30px;margin-top:20px;">
        <!-- Location Chart -->
        <div>
            <h4 style="margin-bottom:15px;color:#374151;">üìç Mood by Location</h4>
            <div style="position:relative;height:300px;border:2px dashed #e5e7eb;border-radius:8px;padding:10px;background:#fafafa;">
                <canvas id="moodByLocationChart"></canvas>
            </div>
        </div>
        
        <!-- Time Chart -->
        <div>
            <h4 style="margin-bottom:15px;color:#374151;">‚è∞ Mood by Time of Day</h4>
            <div style="position:relative;height:300px;border:2px dashed #e5e7eb;border-radius:8px;padding:10px;background:#fafafa;">
                <canvas id="moodByTimeChart"></canvas>
            </div>
        </div>
        
        <!-- Day Chart -->
        <div>
            <h4 style="margin-bottom:15px;color:#374151;">üìÖ Mood by Day of Week</h4>
            <div style="position:relative;height:300px;border:2px dashed #e5e7eb;border-radius:8px;padding:10px;background:#fafafa;">
                <canvas id="moodByDayChart"></canvas>
            </div>
        </div>

        <div>
            <h4 style="margin-bottom:15px;color:#374151;">Mood by Month</h4>
            <div style="position:relative;height:300px;border:2px dashed #e5e7eb;border-radius:8px;padding:10px;background:#fafafa;">
                <canvas id="moodByMonthChart"></canvas>
            </div>
        </div>
    </div>




<!-- Calendar Section -->
<!-- Calendar Section -->
<div id="calendar" class="content-section">
    <div class="content-card">
        <div class="calendar-header">
            <h3 id="calendarMonth"></h3>
            <div class="calendar-controls">
                <button class="btn-calendar" onclick="previousMonth()" title="Previous month">
                    <span>‚Äπ</span>
                </button>
                <button class="btn-calendar" onclick="nextMonth()" title="Next month">
                    <span>‚Ä∫</span>
                </button>
                <button class="btn-calendar" onclick="goToToday()" title="Go to today">
                    <span>üìÖ</span>
                </button>
            </div>
        </div>

        <div class="calendar-legend">
            <div class="legend-item">
                <span class="legend-color streak-day"></span>
                <span>Writing Streak</span>
            </div>
            <div class="legend-item">
                <span class="legend-color task-day"></span>
                <span>Has Tasks</span>
            </div>
            <div class="legend-item">
                <span class="legend-color today"></span>
                <span>Today</span>
            </div>
        </div>

        <div class="calendar-weekdays">
            <div>Sun</div>
            <div>Mon</div>
            <div>Tue</div>
            <div>Wed</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
        </div>

        <div id="calendarGrid" class="calendar-grid">
            <!-- Calendar days will be generated here -->
        </div>
    </div>

    <div class="content-card" style="margin-top: 20px;">
        <h3 id="selectedDateTitle">Select a date to view details</h3>
        <div id="calendarEntries" class="calendar-entries">
            <div class="empty-state">
                <div class="empty-state-icon">üìÖ</div>
                <p>Select a date to see journal entries and tasks</p>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<!-- Quill JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="script.js"></script>
</script>
</body>
</html>